<p-card header="{{$header () ?? ($reading().date.toISODate() | date: 'MMM d, y')}}">
  <div class="readings">
    @for (chapter of $reading().readings; track $index) {
      @if(bibleReadingEngine.$bibleBooks().length > 0) {
        <a [href]="bibleReadingEngine.bibleReadingLinkURL(chapter)" target="_blank">
          <h4>{{bibleReadingEngine.$bibleBooks()[chapter.bookId - 1].abbr}} {{chapter.fromChapter}} - {{chapter.toChapter}}</h4>
        </a>
      }
    }
  </div>

  @if(userEngine.$signedInUser()) {
    @let progressPercentage = $progress()?.progress === 'PREPARING' ? Math.round(100 * 1/3) : $progress()?.progress === 'READING' ? Math.round(100 * 2/3) : $progress()?.progress === 'COMPLETE' ? Math.round(100 * 3/3) : 0;
    <div class="progress">
      <p-progress-bar [value]="progressPercentage" />
        <p-button-group class="test">
          <p-button [outlined]="$progress()?.progress !== 'PREPARING'" size="small" (click)="bibleReadingEngine.updateProgress($reading().scheduleId, 0, $reading().day, 'PREPARING')">Preparing</p-button>
          <p-button [outlined]="$progress()?.progress !== 'READING'" size="small" (click)="bibleReadingEngine.updateProgress($reading().scheduleId, 0, $reading().day, 'READING')">Reading</p-button>
          <p-button [outlined]="$progress()?.progress !== 'COMPLETE'" size="small" (click)="bibleReadingEngine.updateProgress($reading().scheduleId, 0, $reading().day, 'COMPLETE')">Complete</p-button>
        </p-button-group>
    </div>


    <ng-template #footer>
<!--      <p-avatar-group>-->
<!--        <p-avatar label="D" shape="circle"></p-avatar>-->
<!--      </p-avatar-group>-->
    </ng-template>
  }

</p-card>
